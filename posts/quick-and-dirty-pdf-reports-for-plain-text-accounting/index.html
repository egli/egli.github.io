<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Say you want to hand out financial reports (such as a balance sheet and an income statement) to a non-techie someone. Most likely that means handing out the statements on paper. Given that I&rsquo;m doing Plain Text Accounting, what is an easy way to generate decent looking output on paper?
hledger has two convenient commands to generate a balance sheet and an income statement. Let&rsquo;s use the demo.journal from the hledger web site as an example for this:'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Quick and dirty PDF reports for Plain Text Accounting • egli.dev'>
<meta property='og:description' content='Say you want to hand out financial reports (such as a balance sheet and an income statement) to a non-techie someone. Most likely that means handing out the statements on paper. Given that I&rsquo;m doing Plain Text Accounting, what is an easy way to generate decent looking output on paper?
hledger has two convenient commands to generate a balance sheet and an income statement. Let&rsquo;s use the demo.journal from the hledger web site as an example for this:'>
<meta property='og:url' content='http://egli.dev/posts/quick-and-dirty-pdf-reports-for-plain-text-accounting/'>
<meta property='og:site_name' content='egli.dev'>
<meta property='og:type' content='article'><meta property='article:section' content='posts'><meta property='article:tag' content='plaintextaccounting'><meta property='article:tag' content='org-mode'><meta property='article:tag' content='latex'><meta property='article:tag' content='Emacs'><meta property='article:published_time' content='2020-02-12T15:01:00&#43;01:00'/><meta property='article:modified_time' content='2020-02-12T15:01:00&#43;01:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.80.0" />

  <title>Quick and dirty PDF reports for Plain Text Accounting • egli.dev</title>
  <link rel='canonical' href='http://egli.dev/posts/quick-and-dirty-pdf-reports-for-plain-text-accounting/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.ab98e12b.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#ffcd00;}
</style>

  

</head>
<body class='page type-posts'>

  <div class='site'><a class='screen-reader-text' href='#content'>Skip to Content</a><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='/tags/'>Tags</a>
      </li><li class='item'>
        <a href='/posts/'>Archive</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>egli.dev</p><p class='desc site-desc'></p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Quick and dirty PDF reports for Plain Text Accounting</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2020-02-12T15:01:00&#43;01:00'>2020-02-12</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
4 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  <p>Say you want to hand out financial reports (such as a <a href="https://en.wikipedia.org/wiki/Balance%5Fsheet">balance sheet</a>
and an <a href="https://en.wikipedia.org/wiki/Income%5Fstatement">income statement</a>) to a non-techie someone. Most likely that
means handing out the statements on paper. Given that I&rsquo;m doing <a href="https://plaintextaccounting.org/#what-and-why">Plain
Text Accounting</a>, what is an easy way to generate decent looking output
on paper?</p>
<p><a href="https://hledger.org/">hledger</a> has two convenient commands to generate a balance sheet and an
income statement. Let&rsquo;s use the <a href="https://github.com/simonmichael/hledger_site/blob/072fddfb60b29ee84c8283d39bea9e6ae8ad3aea/files/demo.journal">demo.journal</a> from the hledger web site
as an example for this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ hledger balancesheet -f demo.journal --empty --value
Balance Sheet 2017/12/31-2020/03/06

                   <span style="color:#f92672">||</span>    2020/03/06
<span style="color:#f92672">===================</span>++<span style="color:#f92672">===============</span>
 Assets            <span style="color:#f92672">||</span>
-------------------++---------------
 Asset             <span style="color:#f92672">||</span> 52,661.92 USD
   Cash            <span style="color:#f92672">||</span>    300.00 USD
   Bank            <span style="color:#f92672">||</span> 25,336.71 USD
     JP Morgan     <span style="color:#f92672">||</span> 22,651.48 USD
     Weels Fargo   <span style="color:#f92672">||</span>  2,275.23 USD
     Wells Fargo   <span style="color:#f92672">||</span>    410.00 USD
   Online Account  <span style="color:#f92672">||</span>    125.21 USD
     Apple Pay     <span style="color:#f92672">||</span>     41.97 USD
     Paypal        <span style="color:#f92672">||</span>     83.24 USD
   Stocks          <span style="color:#f92672">||</span> 26,900.00 USD
     JP Morgan     <span style="color:#f92672">||</span> 26,900.00 USD
-------------------++---------------
                   <span style="color:#f92672">||</span> 52,661.92 USD
<span style="color:#f92672">===================</span>++<span style="color:#f92672">===============</span>
 Liabilities       <span style="color:#f92672">||</span>
-------------------++---------------
 Liabilities       <span style="color:#f92672">||</span>             <span style="color:#ae81ff">0</span>
   Credit Card     <span style="color:#f92672">||</span>             <span style="color:#ae81ff">0</span>
     Visa Platinum <span style="color:#f92672">||</span>             <span style="color:#ae81ff">0</span>
-------------------++---------------
                   <span style="color:#f92672">||</span>             0
<span style="color:#f92672">===================</span>++<span style="color:#f92672">===============</span>
 Net:              <span style="color:#f92672">||</span> 52,661.92 USD
</code></pre></div><p>And similarly for the income statement</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ hledger incomestatement -f demo.journal
Income Statement 2017/12/31-2020/03/06

                                <span style="color:#f92672">||</span> 2017/12/31-2020/03/06
<span style="color:#f92672">================================</span>++<span style="color:#f92672">=======================</span>
 Revenues                       <span style="color:#f92672">||</span>
--------------------------------++-----------------------
 Revenue:Capital Gain in stocks <span style="color:#f92672">||</span>            300.00 USD
 Revenue:Fx Revenue             <span style="color:#f92672">||</span>            213.00 USD
 Revenue:Riding App             <span style="color:#f92672">||</span>            300.00 USD
 Revenue:Salary                 <span style="color:#f92672">||</span>         21,600.00 USD
--------------------------------++-----------------------
                                <span style="color:#f92672">||</span>         22,413.00 USD
<span style="color:#f92672">================================</span>++<span style="color:#f92672">=======================</span>
 Expenses                       <span style="color:#f92672">||</span>
--------------------------------++-----------------------
 Expenses:Car:Gas               <span style="color:#f92672">||</span>             78.37 USD
 Expenses:Clothing              <span style="color:#f92672">||</span>         -1,944.00 USD
 Expenses:Housing:Maintenance   <span style="color:#f92672">||</span>           -110.00 USD
 Expenses:Housing:Property Tax  <span style="color:#f92672">||</span>            300.00 USD
 Expenses:Housing:Rental        <span style="color:#f92672">||</span>          5,850.00 USD
 Expenses:Leisure:Events        <span style="color:#f92672">||</span>            275.00 USD
 Expenses:Leisure:Travel        <span style="color:#f92672">||</span>          2,678.00 USD
 Expenses:Products:Clothing     <span style="color:#f92672">||</span>             80.00 USD
 Expenses:Products:Food         <span style="color:#f92672">||</span>          1,148.33 USD
--------------------------------++-----------------------
                                <span style="color:#f92672">||</span>          8,355.70 USD
<span style="color:#f92672">================================</span>++<span style="color:#f92672">=======================</span>
 Net:                           <span style="color:#f92672">||</span>         14,057.30 USD
</code></pre></div><p>This is all fine and dandy, but how do I get this to print out nicely?</p>
<p>Export the report as CSV (using the <code>-O csv</code> option) and then perform
some magic to convert this to LaTeX? People have <a href="https://www.latex-tutorial.com/tutorials/pgfplotstable/">apparently</a> done this
using the <a href="https://www.ctan.org/pkg/pgfplotstable">pgfplotstable</a> package.</p>
<p>Another method would be to generate HTML with the <code>-O html</code> option,
style the result and hope that it prints out half decently.</p>
<p>Yet another quick hack involves <a href="https://pandoc.org/">pandoc</a> to convert the tables to LaTeX:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ hledger balancesheet -f demo.journal -O html | pandoc -f html -t latex
</code></pre></div><p>Unfortunately pandoc doesn&rsquo;t seem to recognize the table in the html
output and doesn&rsquo;t convert them to LaTeX tables.</p>
<p>Instead I propose a simpler and admittedly dirtier method: Create an
<a href="https://orgmode.org/">org-mode file</a> that contains the auxiliary text around the reports.
Then generate the reports using an org-mode source code block. The csv
output is converted to an org-mode table which in the end will be
exported to a neatly formatted LaTeX table.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-org" data-lang="org"><span style="color:#75715e">#+BEGIN_SRC </span><span style="color:#75715e">shell</span><span style="color:#75715e"> :exports results
</span><span style="color:#75715e"></span>hledger balancesheet -f demo.journal -O csv --empty --value
<span style="color:#75715e">#+END_SRC</span>
</code></pre></div><p>Make sure you use the <code>booktabs</code> package for <a href="https://tex.stackexchange.com/q/112343">good looking LaTeX tables</a>
and optionally the <code>siunitx</code> package to align the numbers
nicely<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p>Then use the <a href="https://orgmode.org/manual/Exporting.html#Exporting">org-mode export facilities</a> to generate a LaTeX
file<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>. Enhance the result as you wish, for example you most
likely will add some horizontal lines using <code>\toprule</code>, <code>\midrule</code> and
<code>\bottomrule</code>, possibly you will remove some superfluous lines from
the csv export, maybe you&rsquo;ll change the names of some of the top-level
accounts to your locale and quite likely you&rsquo;ll trim the empty
columns<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>.</p>
<p>I admit this approach is hackish and bites you if you do the
conversion often. However if you consider that you&rsquo;ll probably be
doing the financial reports only once a year, IMHO this doesn&rsquo;t
justify the effort to pack this up into a script.</p>
<p>For more details have a look at the complete <a href="/files/quick-and-dirty-pdf-reports-for-plain-text-accounting.org">org-mode file</a>, the
generated <a href="/files/quick-and-dirty-pdf-reports-for-plain-text-accounting.tex">LaTeX file</a> and the drop dead gorgeous <a href="/files/quick-and-dirty-pdf-reports-for-plain-text-accounting.pdf">PDF output</a>.</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><code>siunitx</code> comes with a new column type, the <code>S</code> column. That lets you do things like <code>\begin{tabular}{lS}</code> and have the <a href="https://tex.stackexchange.com/a/2747">numbers align on the decimal point</a>. For me this worked great as long as no currencies were involved. As the output does contain currencies and I didn&rsquo;t want to remove them I dropped the use of <code>siunitx</code>. <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>by typing <code>C-c C-e l l</code> (in case your muscle memory is failing you). <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>The csv export has a small bug in that it creates a few empty columns that need to be cleaned. Thanks to Simon Michael the bug has been <a href="https://github.com/simonmichael/hledger/commit/bd0753101e7eb0512aa8214f0014119651f9c2d1">fixed in master</a>. <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='/tags/plaintextaccounting/'>plaintextaccounting</a>, <a class='tag' href='/tags/org-mode/'>org-mode</a>, <a class='tag' href='/tags/latex/'>latex</a>, <a class='tag' href='/tags/emacs/'>Emacs</a></div>

  </div>
</footer>


</article>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/egli' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:christian@egli.dev' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2013-2022 Christian Egli &ndash; Licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" alt="Creative Commons License"></a></p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.c3bcf2df.js'></script><script src='/js/custom.js'></script>

</body>

</html>

